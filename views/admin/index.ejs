<%- include('../partials/head', { pageTitle, hotelName, csrfToken, darkMode }) %>
<%- include('../partials/nav') %>
<%- include('../partials/alerts') %>
<section class="admin" data-animate="fade-up">
  <h1>Control Deck</h1>
  <p>Adjust availability, review transmissions, and monitor bookings across <%= hotelName %>.</p>
  <div class="admin-grid">
    <section class="admin-panel">
      <h2>Room Availability</h2>
      <table class="admin-table">
        <thead>
          <tr>
            <th>Suite</th>
            <th>Category</th>
            <th>Capacity</th>
            <th>Available</th>
            <th>Adjust</th>
          </tr>
        </thead>
        <tbody>
          <% rooms.forEach(function(room) { %>
            <tr>
              <td><%= room.name %></td>
              <td><%= room.category %></td>
              <td><%= room.capacity %></td>
              <td><%= room.availableUnits %></td>
              <td>
                <form action="/admin/rooms/<%= room.id %>" method="post" class="inline-form">
                  <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                  <input type="number" name="availableUnits" min="0" max="20" value="<%= room.availableUnits %>" />
                  <button type="submit" class="cta-button">Update</button>
                </form>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </section>
    <section class="admin-panel">
      <h2>Bookings</h2>
      <ul class="admin-list">
        <% if (!bookings.length) { %>
          <li>No bookings yet.</li>
        <% } %>
        <% bookings.forEach(function(booking) { %>
          <li>
            <strong><%= booking.roomName %></strong> · <%= booking.status %> · <%= booking.guests %> guests · ₵<%= booking.totalCost %><br />
            <small><%= new Date(booking.startDate).toLocaleDateString('en-US') %> → <%= new Date(booking.endDate).toLocaleDateString('en-US') %></small>
          </li>
        <% }) %>
      </ul>
    </section>
    <section class="admin-panel">
      <h2>Inquiries</h2>
      <ul class="admin-list">
        <% if (!inquiries.length) { %>
          <li>No inquiries received yet.</li>
        <% } %>
        <% inquiries.forEach(function(inquiry) { %>
          <li>
            <strong><%= inquiry.name %></strong> — <%= inquiry.email %><br />
            <small><%= new Date(inquiry.receivedAt).toLocaleString('en-US') %></small>
            <p><%= inquiry.message %></p>
          </li>
        <% }) %>
      </ul>
    </section>
  </div>
</section>
<%- include('../partials/footer') %>
