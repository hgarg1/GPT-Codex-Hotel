<%- include('partials/head', { pageTitle, hotelName, csrfToken, darkMode }) %>
<%- include('partials/nav') %>
<%- include('partials/alerts') %>
<section class="page-hero" data-animate="fade-up">
  <h1>Suites, Pods & Villas</h1>
  <p>Select from thirty immersive environments designed for explorers, creators, and celestial dreamers.</p>
</section>
<section class="room-groups">
  <% Object.keys(groupedRooms).forEach(function(category) { %>
    <div class="room-group" data-animate="fade-up">
      <h2><%= category %></h2>
      <div class="card-grid">
        <% groupedRooms[category].forEach(function(room) { %>
          <article class="room-card">
            <img src="<%= room.image %>" alt="Illustration of <%= room.name %>" />
            <div class="room-body">
              <h3><%= room.name %></h3>
              <p><%= room.description %></p>
              <ul class="room-meta">
                <li>Capacity: <%= room.capacity %> guests</li>
                <li>Rate: â‚µ<%= room.price %> / night</li>
                <li><%= room.availableUnits %> available</li>
              </ul>
              <form action="/book" method="post" class="room-book-form">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                <input type="hidden" name="roomId" value="<%= room.id %>" />
                <div class="field-row">
                  <label>
                    Arrival
                    <input type="date" name="startDate" required />
                  </label>
                  <label>
                    Departure
                    <input type="date" name="endDate" required />
                  </label>
                </div>
                <div class="field-row">
                  <label>
                    Guests
                    <input type="number" name="guests" min="1" max="<%= room.capacity %>" value="2" required />
                  </label>
                </div>
                <label class="sr-only">Notes
                  <input type="text" name="notes" placeholder="Celebrations, preferences" />
                </label>
                <button type="submit" class="cta-button">Reserve</button>
              </form>
            </div>
          </article>
        <% }) %>
      </div>
    </div>
  <% }) %>
</section>
<%- include('partials/footer') %>
